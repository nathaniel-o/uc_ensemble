(()=>{var t={171:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,o)}return a}function a(t){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?e(Object(n),!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(e,a,o){return(a=function(e){var a=function(e){if("object"!=t(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var o=a.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(a)?a:a+""}(a))in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}!function(){"use strict";console.log("Cocktail Images Block Editor script loaded"),wp.domReady(function(){if(console.log("Cocktail Images: DOM Ready"),wp.hooks&&wp.compose&&wp.element&&wp.blockEditor&&wp.components&&wp.i18n){var t=wp.hooks.addFilter,e=wp.compose.createHigherOrderComponent,o=wp.element.Fragment,n=wp.blockEditor.InspectorControls,i=wp.components,c=i.PanelBody,r=i.PanelRow,l=i.ToggleControl,s=wp.i18n.__;t("blocks.registerBlockType","cocktail-images/image-block-attributes",function(t,e){return"core/image"===e?a(a({},t),{},{attributes:a(a({},t.attributes),{},{cocktailNothing:{type:"boolean",default:!1},cocktailPopOut:{type:"boolean",default:!1}})}):t}),t("editor.BlockEdit","cocktail-images/with-cocktail-image-controls",e(function(t){return function(e){if("core/image"!==e.name)return wp.element.createElement(t,e);var a=e.attributes,i=e.setAttributes,u=a.cocktailNothing,m=a.cocktailPopOut;return wp.element.createElement(o,{},wp.element.createElement(t,e),wp.element.createElement(n,{},wp.element.createElement(c,{title:s("Cocktail Images","cocktail-images"),initialOpen:!1},wp.element.createElement(r,{},wp.element.createElement(l,{label:s("Nothing","cocktail-images"),help:s("This button does nothing","cocktail-images"),checked:u,onChange:function(t){i({cocktailNothing:t})}})),wp.element.createElement(r,{},wp.element.createElement(l,{label:s("Pop Out","cocktail-images"),help:s("Enable pop out effect for this image","cocktail-images"),checked:m,onChange:function(t){i({cocktailPopOut:t})}})))))}},"withCocktailImageControls")),t("blocks.getSaveContent.extraProps","cocktail-images/image-block-save-props",function(t,e,o){if("core/image"===e.name){var n=t.className||"";return o.cocktailPopOut&&(n+=" cocktail-pop-out"),a(a({},t),{},{className:n.trim()})}return t}),console.log("Cocktail Images Block Editor integration loaded"),console.log("Cocktail Images: Filters registered successfully")}else console.error("Cocktail Images: Required WordPress components not available")})}()},473:()=>{!function(){"use strict";function t(t){t.preventDefault();var e=t.target;if("IMG"===e.tagName){var a=e.closest("figure.wp-block-image");if(a){var o=e.getAttribute("data-id")||e.getAttribute("data-attachment-id"),n=e.getAttribute("alt")||"";console.log("Randomizing image:",o,n);var i=cocktailImagesAjax.ajaxurl,c="action=randomize_image&current_id=".concat(encodeURIComponent(o),"&nonce=").concat(cocktailImagesAjax.nonce);fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c}).then(function(t){return t.json()}).then(function(t){if(t.success&&t.data.image){var o=t.data.image;console.log("Image randomized to:",o.title),console.log("New image URL:",o.src),e.src=o.src,e.alt=o.alt,e.setAttribute("data-id",o.id),o.attachment_id&&e.setAttribute("data-attachment-id",o.attachment_id),o.srcset&&e.setAttribute("srcset",o.srcset),o.sizes&&e.setAttribute("sizes",o.sizes),o.data_orig_file&&e.setAttribute("data-orig-file",o.data_orig_file),o.data_orig_size&&e.setAttribute("data-orig-size",o.data_orig_size),o.data_image_title&&e.setAttribute("data-image-title",o.data_image_title),o.data_image_caption&&e.setAttribute("data-image-caption",o.data_image_caption),o.data_medium_file&&e.setAttribute("data-medium-file",o.data_medium_file),o.data_large_file&&e.setAttribute("data-large-file",o.data_large_file),o.attachment_id&&(e.className=e.className.replace(/wp-image-\d+/,"wp-image-".concat(o.attachment_id)));var n=a.querySelector("figcaption");n&&o.data_image_caption&&(n.innerHTML=o.data_image_caption,console.log("Updated figcaption:",o.data_image_caption)),e.onload=function(){console.log("New image loaded successfully"),"function"==typeof ucPortraitLandscape&&ucPortraitLandscape(e,a)},setTimeout(function(){e.complete&&(console.log("Image load completed"),"function"==typeof ucPortraitLandscape&&ucPortraitLandscape(e,a))},100)}else console.error("Failed to randomize image:",t.message)}).catch(function(t){console.error("Error randomizing image:",t)})}}}function e(t){t.preventDefault();var e=t.target;if("IMG"===e.tagName){var o=e.closest("figure.wp-block-image");if(o){var n=e.getAttribute("data-id")||e.getAttribute("data-attachment-id"),i=e.getAttribute("alt")||"",c=e.getAttribute("data-image-title")||"",r="queue_".concat(n),l=window[r]||{currentIndex:0,totalMatches:0,baseTitle:"",matches:[]},s=c||i;if(s=s.split(":")[0].toLowerCase().replace(/^T2-/,"").replace(/[-_]/g," ").replace(/\s+/g," ").trim().split(" ").filter(function(t){return t.length>=3}).join(" "),console.log("Base Title: ",s),l.baseTitle!==s||0===l.matches.length){l={currentIndex:0,totalMatches:0,baseTitle:s,matches:[]},console.log('Searching for matches: "'.concat(s,'"'));var u=cocktailImagesAjax.ajaxurl,m="action=find_matching_image&current_id=".concat(encodeURIComponent(n),"&base_title=").concat(encodeURIComponent(s),"&is_new_search=true&nonce=").concat(cocktailImagesAjax.nonce);fetch(u,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:m}).then(function(t){return t.json()}).then(function(t){t.success&&t.data.all_matches?(l.matches=t.data.all_matches,l.totalMatches=t.data.total_matches,window[r]=l,console.log("Found ".concat(l.totalMatches," matches, cached for future use")),a(e,o,l,r)):console.error("Failed to find matches:",t.message)}).catch(function(t){console.error("Error finding matches:",t)})}else console.log('Using cached matches: "'.concat(s,'" (index: ').concat(l.currentIndex,"/").concat(l.totalMatches,")")),a(e,o,l,r)}}}function a(t,e,a,n){if(0!==a.matches.length){var i=a.currentIndex%a.totalMatches,c=a.matches[i];a.currentIndex=(i+1)%a.totalMatches,window[n]=a,console.log("Match ".concat(i+1,"/").concat(a.totalMatches,': "').concat(c.title,'"'));var r=function(t){var e=document.createElement("div");return e.style.cssText="\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: white;\n            z-index: 10;\n            opacity: 0;\n            transition: opacity 0.3s ease-in-out;\n        ",t.style.position="relative",t.appendChild(e),setTimeout(function(){e.style.opacity="1"},10),e}(e);setTimeout(function(){t.src=c.src,t.alt=c.alt,t.setAttribute("data-id",c.id),c.attachment_id&&t.setAttribute("data-attachment-id",c.attachment_id),c.srcset&&t.setAttribute("srcset",c.srcset),c.sizes&&t.setAttribute("sizes",c.sizes),c.data_orig_file&&t.setAttribute("data-orig-file",c.data_orig_file),c.data_orig_size&&t.setAttribute("data-orig-size",c.data_orig_size),c.data_image_title&&t.setAttribute("data-image-title",c.data_image_title),c.data_image_caption&&t.setAttribute("data-image-caption",c.data_image_caption),c.data_medium_file&&t.setAttribute("data-medium-file",c.data_medium_file),c.data_large_file&&t.setAttribute("data-large-file",c.data_large_file),c.attachment_id&&(t.className=t.className.replace(/wp-image-\d+/,"wp-image-".concat(c.attachment_id)));var a=e.querySelector("figcaption");if(a){a.getAttribute("data-original-caption")||a.setAttribute("data-original-caption",a.innerHTML);var n=a.getAttribute("data-original-caption"),i=c.data_image_caption||c.title;a.innerHTML=n+'<p style="font-size: 12px; margin: 5px 0 0 0; color: #666; font-style: italic;">('.concat(i,")</p>"),console.log("Updated figcaption with original + new title:",i)}t.onload=function(){console.log("New image loaded successfully"),o(r),"function"==typeof ucPortraitLandscape&&ucPortraitLandscape(t,e)},setTimeout(function(){t.complete&&(console.log("Image load completed"),o(r),"function"==typeof ucPortraitLandscape&&ucPortraitLandscape(t,e))},100)},1e3)}else console.error("No cached matches available")}function o(t){t.style.opacity="0",setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},300)}function n(){var t=document.querySelectorAll("figure.wp-block-image img");t.forEach(function(t){var a=35e3*Math.random()+5e3;console.log("Setting up auto-title-matching for image in ".concat(Math.round(a/1e3),"s")),setTimeout(function(){e({target:t,preventDefault:function(){}});var a=function(){var o=35e3*Math.random()+5e3;console.log("Next auto-title-matching in ".concat(Math.round(o/1e3),"s")),setTimeout(function(){e({target:t,preventDefault:function(){}}),a()},o)};a()},a)}),console.log("Setup auto-title-matching for ".concat(t.length," image blocks"))}document.addEventListener("DOMContentLoaded",function(){window.location.href.includes("upload.php")||n()}),window.ucRandomizeImage=t,window.ucSetupImageRandomization=function(){var e=document.querySelectorAll("figure.wp-block-image img");e.forEach(function(e){var a=8e4*Math.random()+1e4;setTimeout(function(){t({target:e,preventDefault:function(){}});var a=function(){var o=8e4*Math.random()+1e4;console.log("Next auto-randomization in ".concat(Math.round(o/1e3),"s")),setTimeout(function(){t({target:e,preventDefault:function(){}}),a()},o)};a()},a)}),console.log("Setup auto-randomization for ".concat(e.length," image blocks"))},window.ucOneDrinkAllImages=e,window.ucSetupOneDrinkAllImages=n,window.ucOneTimePostsTest=function(){if(console.log("=== Starting ucOneTimePostsTest ==="),window.location.href.includes("upload.php")){var t=document.querySelectorAll(".attachment-preview img, .attachment img, .wp-attachment img");if(0!==t.length){console.log("Found ".concat(t.length," images in media library"));var e=0;!function a(o){for(var n=Math.min(o+5,t.length),i=function(a){var o=t[a],n=o.src,i=o.alt||"No alt text";console.log("\n--- Testing Image ".concat(a+1,"/").concat(t.length," ---")),console.log("Src: ".concat(n)),console.log("Alt: ".concat(i)),function(t){var e=t.className.split(" ").find(function(t){return t.startsWith("wp-image-")});if(e&&e.replace("wp-image-","")){var a=t.alt||t.getAttribute("data-image-title")||t.src.split("/").pop().replace(/\.[^/.]+$/,""),o={action:"check_featured_image",nonce:cocktailImagesAjax.nonce,image_title:a};return fetch(cocktailImagesAjax.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o)}).then(function(t){if(!t.ok)return t.text().then(function(e){throw console.error("Server response:",e),new Error("HTTP error! status: ".concat(t.status," - Server returned: ").concat(e.substring(0,200)))});var e=t.headers.get("content-type");return e&&e.includes("application/json")?t.json():t.text().then(function(t){throw console.error("Non-JSON response:",t),new Error("Response is not JSON")})}).then(function(t){if(t.success){var e=t.data;return!!e.post_id&&(e.exact_match?e.other_matches&&e.other_matches.length:e.all_matches&&e.all_matches.length,e.post_id)}return!1}).catch(function(t){return console.error("Error checking featured image status:",t),!1})}return Promise.resolve(!1)}(o).then(function(t){t?console.log("✅ Image ".concat(a+1,": Featured in post ID ").concat(t)):console.log("❌ Image ".concat(a+1,": Not featured in any post"))}).catch(function(t){console.error("❌ Image ".concat(a+1,": Error - ").concat(t.message))}),e++},c=o;c<n;c++)i(c);n<t.length?setTimeout(function(){a(n)},1e3):(console.log("\n=== Test Complete ==="),console.log("Processed ".concat(e," images total")))}(0)}else console.log("No images found in media library. Make sure you have images loaded.")}else console.log("Not on media library page. Navigate to /wp-admin/upload.php to run this test.")}}()}},e={};function a(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,a),i.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";a(473),a(171),console.log("Cocktail Images Plugin - Block Editor loaded")})()})();