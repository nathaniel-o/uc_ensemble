(()=>{var t={171:()=>{!function(){"use strict";wp.domReady(function(){console.log("Cocktail Images: Basic plugin loaded - functionality moved to drinks-plugin")})}()},473:()=>{!function(){"use strict";function t(t){t.preventDefault();var e=t.target;if("IMG"===e.tagName){var a=e.closest("figure.wp-block-image");if(a){var o=e.getAttribute("data-id")||e.getAttribute("data-attachment-id"),n=e.getAttribute("alt")||"";console.log("Randomizing image:",o,n);var i=cocktailImagesAjax.ajaxurl,c="action=randomize_image&current_id=".concat(encodeURIComponent(o),"&nonce=").concat(cocktailImagesAjax.nonce);fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c}).then(function(t){return t.json()}).then(function(t){if(t.success&&t.data.image){var o=t.data.image;console.log("Image randomized to:",o.title),console.log("New image URL:",o.src),e.src=o.src,e.alt=o.alt,e.setAttribute("data-id",o.id),o.attachment_id&&e.setAttribute("data-attachment-id",o.attachment_id),o.srcset&&e.setAttribute("srcset",o.srcset),o.sizes&&e.setAttribute("sizes",o.sizes),o.data_orig_file&&e.setAttribute("data-orig-file",o.data_orig_file),o.data_orig_size&&e.setAttribute("data-orig-size",o.data_orig_size),o.data_image_title&&e.setAttribute("data-image-title",o.data_image_title),o.data_image_caption&&e.setAttribute("data-image-caption",o.data_image_caption),o.data_medium_file&&e.setAttribute("data-medium-file",o.data_medium_file),o.data_large_file&&e.setAttribute("data-large-file",o.data_large_file),o.attachment_id&&(e.className=e.className.replace(/wp-image-\d+/,"wp-image-".concat(o.attachment_id)));var n=a.querySelector("figcaption");n&&o.data_image_caption&&(n.innerHTML=o.data_image_caption,console.log("Updated figcaption:",o.data_image_caption)),e.onload=function(){console.log("New image loaded successfully"),"function"==typeof ucPortraitLandscape&&ucPortraitLandscape(e,a)},setTimeout(function(){e.complete&&(console.log("Image load completed"),"function"==typeof ucPortraitLandscape&&ucPortraitLandscape(e,a))},100)}else console.error("Failed to randomize image:",t.message)}).catch(function(t){console.error("Error randomizing image:",t)})}}}function e(t){t.preventDefault();var e=t.target;if("IMG"===e.tagName){var o=e.closest("figure.wp-block-image");if(o){var n=e.getAttribute("data-id")||e.getAttribute("data-attachment-id"),i=e.getAttribute("alt")||"",c=e.getAttribute("data-image-title")||"",r="queue_".concat(n),s=window[r]||{currentIndex:0,totalMatches:0,baseTitle:"",matches:[]},l=c||i;if(l=l.split(":")[0].toLowerCase().replace(/^T2-/,"").replace(/[-_]/g," ").replace(/\s+/g," ").trim().split(" ").filter(function(t){return t.length>=3}).join(" "),console.log("Base Title: ",l),s.baseTitle!==l||0===s.matches.length){s={currentIndex:0,totalMatches:0,baseTitle:l,matches:[]},console.log('Searching for matches: "'.concat(l,'"'));var d=cocktailImagesAjax.ajaxurl,u="action=find_matching_image&current_id=".concat(encodeURIComponent(n),"&base_title=").concat(encodeURIComponent(l),"&is_new_search=true&nonce=").concat(cocktailImagesAjax.nonce);fetch(d,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u}).then(function(t){return t.json()}).then(function(t){t.success&&t.data.all_matches?(s.matches=t.data.all_matches,s.totalMatches=t.data.total_matches,window[r]=s,console.log("Found ".concat(s.totalMatches," matches, cached for future use")),a(e,o,s,r)):console.error("Failed to find matches:",t.message)}).catch(function(t){console.error("Error finding matches:",t)})}else console.log('Using cached matches: "'.concat(l,'" (index: ').concat(s.currentIndex,"/").concat(s.totalMatches,")")),a(e,o,s,r)}}}function a(t,e,a,n){if(0!==a.matches.length){var i=a.currentIndex%a.totalMatches,c=a.matches[i];a.currentIndex=(i+1)%a.totalMatches,window[n]=a,console.log("Match ".concat(i+1,"/").concat(a.totalMatches,': "').concat(c.title,'"'));var r=function(t){var e=document.createElement("div");return e.style.cssText="\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: white;\n            z-index: 10;\n            opacity: 0;\n            transition: opacity 0.3s ease-in-out;\n        ",t.style.position="relative",t.appendChild(e),setTimeout(function(){e.style.opacity="1"},10),e}(e);setTimeout(function(){t.src=c.src,t.alt=c.alt,t.setAttribute("data-id",c.id),c.attachment_id&&t.setAttribute("data-attachment-id",c.attachment_id),c.srcset&&t.setAttribute("srcset",c.srcset),c.sizes&&t.setAttribute("sizes",c.sizes),c.data_orig_file&&t.setAttribute("data-orig-file",c.data_orig_file),c.data_orig_size&&t.setAttribute("data-orig-size",c.data_orig_size),c.data_image_title&&t.setAttribute("data-image-title",c.data_image_title),c.data_image_caption&&t.setAttribute("data-image-caption",c.data_image_caption),c.data_medium_file&&t.setAttribute("data-medium-file",c.data_medium_file),c.data_large_file&&t.setAttribute("data-large-file",c.data_large_file),c.attachment_id&&(t.className=t.className.replace(/wp-image-\d+/,"wp-image-".concat(c.attachment_id)));var a=e.querySelector("figcaption");if(a){a.getAttribute("data-original-caption")||a.setAttribute("data-original-caption",a.innerHTML);var n=a.getAttribute("data-original-caption"),i=c.data_image_caption||c.title;a.innerHTML=n+'<p style="font-size: 12px; margin: 5px 0 0 0; color: #666; font-style: italic;">('.concat(i,")</p>"),console.log("Updated figcaption with original + new title:",i)}t.onload=function(){console.log("New image loaded successfully"),o(r),"function"==typeof ucPortraitLandscape&&ucPortraitLandscape(t,e)},setTimeout(function(){t.complete&&(console.log("Image load completed"),o(r),"function"==typeof ucPortraitLandscape&&ucPortraitLandscape(t,e))},100)},1e3)}else console.error("No cached matches available")}function o(t){t.style.opacity="0",setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},300)}function n(){var t=document.querySelectorAll("figure.wp-block-image img");t.forEach(function(t){var a=35e3*Math.random()+5e3;console.log("Setting up auto-title-matching for image in ".concat(Math.round(a/1e3),"s")),setTimeout(function(){e({target:t,preventDefault:function(){}});var a=function(){var o=35e3*Math.random()+5e3;console.log("Next auto-title-matching in ".concat(Math.round(o/1e3),"s")),setTimeout(function(){e({target:t,preventDefault:function(){}}),a()},o)};a()},a)}),console.log("Setup auto-title-matching for ".concat(t.length," image blocks"))}document.addEventListener("DOMContentLoaded",function(){window.location.href.includes("upload.php")||n()}),window.ucRandomizeImage=t,window.ucSetupImageRandomization=function(){var e=document.querySelectorAll("figure.wp-block-image img");e.forEach(function(e){var a=8e4*Math.random()+1e4;setTimeout(function(){t({target:e,preventDefault:function(){}});var a=function(){var o=8e4*Math.random()+1e4;console.log("Next auto-randomization in ".concat(Math.round(o/1e3),"s")),setTimeout(function(){t({target:e,preventDefault:function(){}}),a()},o)};a()},a)}),console.log("Setup auto-randomization for ".concat(e.length," image blocks"))},window.ucOneDrinkAllImages=e,window.ucSetupOneDrinkAllImages=n,window.ucOneTimePostsTest=function(){if(console.log("=== Starting ucOneTimePostsTest ==="),window.location.href.includes("upload.php")){var t=document.querySelectorAll(".attachment-preview img, .attachment img, .wp-attachment img");if(0!==t.length){console.log("Found ".concat(t.length," images in media library"));var e=0;!function a(o){for(var n=Math.min(o+5,t.length),i=function(a){var o=t[a],n=o.src,i=o.alt||"No alt text";console.log("\n--- Testing Image ".concat(a+1,"/").concat(t.length," ---")),console.log("Src: ".concat(n)),console.log("Alt: ".concat(i)),function(t){var e=t.className.split(" ").find(function(t){return t.startsWith("wp-image-")});if(e&&e.replace("wp-image-","")){var a=t.alt||t.getAttribute("data-image-title")||t.src.split("/").pop().replace(/\.[^/.]+$/,""),o={action:"check_featured_image",nonce:cocktailImagesAjax.nonce,image_title:a};return fetch(cocktailImagesAjax.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o)}).then(function(t){if(!t.ok)return t.text().then(function(e){throw console.error("Server response:",e),new Error("HTTP error! status: ".concat(t.status," - Server returned: ").concat(e.substring(0,200)))});var e=t.headers.get("content-type");return e&&e.includes("application/json")?t.json():t.text().then(function(t){throw console.error("Non-JSON response:",t),new Error("Response is not JSON")})}).then(function(t){if(t.success){var e=t.data;return!!e.post_id&&(e.exact_match?e.other_matches&&e.other_matches.length:e.all_matches&&e.all_matches.length,e.post_id)}return!1}).catch(function(t){return console.error("Error checking featured image status:",t),!1})}return Promise.resolve(!1)}(o).then(function(t){t?console.log("✅ Image ".concat(a+1,": Featured in post ID ").concat(t)):console.log("❌ Image ".concat(a+1,": Not featured in any post"))}).catch(function(t){console.error("❌ Image ".concat(a+1,": Error - ").concat(t.message))}),e++},c=o;c<n;c++)i(c);n<t.length?setTimeout(function(){a(n)},1e3):(console.log("\n=== Test Complete ==="),console.log("Processed ".concat(e," images total")))}(0)}else console.log("No images found in media library. Make sure you have images loaded.")}else console.log("Not on media library page. Navigate to /wp-admin/upload.php to run this test.")}}()}},e={};function a(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,a),i.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";a(473),a(171)})()})();