(()=>{let n=null,t=!1,e=null;function o(){document.addEventListener("click",i),document.addEventListener("click",l),document.addEventListener("keydown",s),document.addEventListener("touchstart",c,{passive:!0}),g(),document.querySelectorAll('[data-cocktail-pop-out="true"]').forEach(n=>{n.style.cursor="pointer",console.log("Drinks Plugin: Set cursor pointer on cocktail pop-out container")}),document.querySelectorAll('[data-cocktail-carousel="true"]').forEach(n=>{n.style.cursor="pointer",console.log("Drinks Plugin: Set cursor pointer on cocktail carousel container")}),new MutationObserver(n=>{n.forEach(n=>{n.addedNodes.length>0&&n.addedNodes.forEach(n=>{1===n.nodeType&&n.querySelector&&n.querySelectorAll("[data-wp-lightbox] img").forEach(n=>{const t=n.closest("[data-wp-lightbox]");t&&(t.style.cursor="pointer")})})})}).observe(document.body,{childList:!0,subtree:!0})}function i(n){const t=n.target.closest("[data-wp-lightbox]");if(!t)return;if(t.hasAttribute("data-cocktail-pop-out")||t.hasAttribute("data-cocktail-carousel"))return;n.preventDefault(),n.stopPropagation();const e=t.querySelector("img");e&&r(e,t)}function l(n){const t=n.target.closest('[data-cocktail-pop-out="true"]');if(!t)return;const e=t.querySelector("img");e&&(n.preventDefault(),n.stopPropagation(),console.log("Drinks Plugin: Opening cocktail pop-out drinks content lightbox for image:",e.src),a(e))}function s(t){n&&"Escape"===t.key&&d()}function c(t){n&&t.target===n&&d()}function r(e,o){if(t)return;const i=e.src,l=e.alt||"";let s="";const c=o.querySelector("figcaption");c&&(s=c.textContent);const r=function(n,t,e){const o=document.createElement("div");o.className="drinks-lightbox-overlay",o.innerHTML=`\n        <div class="drinks-lightbox-content">\n            <button class="drinks-lightbox-close" aria-label="Close lightbox">&times;</button>\n            <img class="drinks-lightbox-image" src="${n}" alt="${t}" />\n            ${e?`<div class="drinks-lightbox-caption">${e}</div>`:""}\n        </div>\n    `;return o.querySelector(".drinks-lightbox-close").addEventListener("click",d),o.addEventListener("click",n=>{n.target===o&&d()}),o}(i,l,s);document.body.appendChild(r),requestAnimationFrame(()=>{r.classList.add("active"),n=r,document.body.style.overflow="hidden"})}function a(n,t){let o=n.dataset.id||n.getAttribute("data-id")||"";if(!o){const t=n.className.match(/wp-image-(\d+)/);t&&(o=t[1])}n.src,n.alt;const i=function(){const n=document.createElement("div");n.className="jetpack-carousel-lightbox-overlay",n.innerHTML='\n        <div class="jetpack-carousel-lightbox-content">\n            <div class="jetpack-carousel-lightbox-header">\n                <button type="button" class="jetpack-carousel-lightbox-close" aria-label="Close carousel">&times;</button>\n            </div>\n            <div class="jetpack-carousel-lightbox-body">\n                <div class="drinks-content-carousel" id="drinks-content-carousel">\n                    <div class="drink-content-slide active" id="initial-drink-content">\n                        \x3c!-- Initial drink content will be loaded here --\x3e\n                        <div class="drink-content-loading">\n                            <div class="drink-content-loading-spinner"></div>\n                            Loading drink content...\n                        </div>\n                        \n                        \x3c!-- Navigation controls --\x3e\n                        <div class="drinks-content-navigation">\n                            <button class="drinks-content-prev" aria-label="Previous drink">&larr;</button>\n                            <button class="drinks-content-next" aria-label="Next drink">&rarr;</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    ';const t=n.querySelector(".jetpack-carousel-lightbox-close");return t?(console.log("Drinks Plugin: Close button found, adding click listener"),t.addEventListener("click",n=>{console.log("Drinks Plugin: Close button clicked"),n.preventDefault(),n.stopPropagation(),u()})):console.error("Drinks Plugin: Close button not found in overlay"),n.addEventListener("click",t=>{t.target===n&&u()}),n}();document.body.appendChild(i),function(n,t){const e=n.querySelector("#drinks-content-carousel");if(!e)return void console.error("Drinks Plugin: No drinks content container found");console.log("Drinks Plugin: Starting to load drinks content..."),console.log("Drinks Plugin: Exclude ID:",t);const o=e.querySelector(".drink-content-loading");o&&(o.innerHTML='<div class="drink-content-loading-spinner"></div>Loading drink content...');const i=new FormData;i.append("action","get_drink_content"),i.append("image_id",t);const l=window.drinksPluginAjax?window.drinksPluginAjax.ajaxurl:"/wp-admin/admin-ajax.php";console.log("Drinks Plugin: Using AJAX URL:",l),fetch(l,{method:"POST",body:i}).then(n=>(console.log("Drinks Plugin: AJAX response status:",n.status),n.json())).then(t=>{console.log("Drinks Plugin: AJAX response data:",t);const o=e.querySelector(".drink-content-loading");o&&o.remove(),t.success&&t.data?(console.log("Drinks Plugin: Found drink content, displaying in lightbox"),e.innerHTML=t.data,function(n){const t=n.querySelector(".drinks-content-prev"),e=n.querySelector(".drinks-content-next");t&&t.addEventListener("click",()=>{console.log("Drinks Plugin: Previous button clicked")}),e&&e.addEventListener("click",()=>{console.log("Drinks Plugin: Next button clicked")})}(n)):(console.log("Drinks Plugin: No drink content found in response"),e.innerHTML='<div class="drink-content-error">No drink content available</div>'),console.log("Drinks Plugin: Drink content loaded successfully")}).catch(n=>{console.error("Drinks Plugin: Error loading drinks content:",n);const t=e.querySelector(".drink-content-loading");t&&(t.innerHTML='<div class="drink-content-error">Error loading drink content</div>')})}(i,o),requestAnimationFrame(()=>{i.classList.add("active"),e=i,document.body.style.overflow="hidden"})}function d(){n&&!t&&(t=!0,n.classList.remove("active"),document.body.style.overflow="",setTimeout(()=>{n&&n.parentNode&&n.parentNode.removeChild(n),n=null,t=!1},300))}function u(){console.log("Drinks Plugin: closeDrinksContentLightbox called"),console.log("Drinks Plugin: Current lightbox:",e),e?(console.log("Drinks Plugin: Removing active class and closing lightbox"),e.classList.remove("active"),document.body.style.overflow="",setTimeout(()=>{e&&e.parentNode&&(console.log("Drinks Plugin: Removing lightbox from DOM"),e.parentNode.removeChild(e)),e=null,console.log("Drinks Plugin: Lightbox closed successfully")},300)):console.log("Drinks Plugin: No current lightbox to close")}function g(){document.querySelectorAll("[data-wp-lightbox] img").forEach(n=>{const t=n.closest("[data-wp-lightbox]");t&&(t.style.cursor="pointer")})}function k(){console.log("Drinks Plugin: Testing drinks content lightbox system..."),console.log("Drinks Plugin: Global object available:",!!window.drinksPluginDrinksContent),console.log("Drinks Plugin: Current drinks content lightbox:",e);const n=document.querySelectorAll('[data-cocktail-pop-out="true"]');return console.log("Drinks Plugin: Found",n.length,"cocktail-pop-out containers"),n.length>0&&(console.log("Drinks Plugin: First container:",n[0]),console.log("Drinks Plugin: First container classes:",n[0].className)),{containers:n.length,lightbox:!!e,global:!!window.drinksPluginPopOut}}function p(n){if(!n||"IMG"!==n.tagName)return void console.warn("⚠️ ucPortraitLandscape: Invalid image element:",n);const t=n.closest("figure")||n.closest(".wp-block-image")||n.parentElement;function e(){n.naturalWidth&&n.naturalHeight&&(t.classList.contains("portrait"),t.classList.contains("landscape"),t.classList.remove("portrait","landscape"),n.naturalHeight>n.naturalWidth?t.classList.add("portrait"):n.naturalHeight<n.naturalWidth&&t.classList.add("landscape"))}t?t.classList.contains("pop-off")||t.classList.contains("wp-block-gallery")||t.classList.contains("portrait")||t.classList.contains("landscape")||(n.complete&&n.naturalWidth&&n.naturalHeight?e():n.addEventListener("load",()=>{e()},{once:!0})):console.warn("⚠️ ucPortraitLandscape: No container found for image:",n.src)}function v(){document.querySelectorAll(".wp-block-image img, figure img").forEach((n,t)=>{p(n)});new MutationObserver(n=>{n.forEach(n=>{n.addedNodes.length>0&&n.addedNodes.forEach(n=>{if(1===n.nodeType){"IMG"===n.tagName&&p(n);const t=n.querySelectorAll?n.querySelectorAll("img"):[];t.length>0&&t.forEach((n,t)=>{p(n)})}})})}).observe(document.body,{childList:!0,subtree:!0})}window.drinksPluginLightbox={init:o,open:r,close:d,setup:g},window.drinksPluginPopOut={init:o,open:a,close:u,test:k},window.testDrinksContent=k,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",v):v(),window.addEventListener("load",()=>{document.querySelectorAll(".wp-block-image img, figure img").forEach((n,t)=>{p(n)})})})();