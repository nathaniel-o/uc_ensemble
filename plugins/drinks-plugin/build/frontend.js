(()=>{let e=null,t=!1,o=null,n=null;function i(){document.addEventListener("click",l),document.addEventListener("click",a),document.addEventListener("keydown",s),document.addEventListener("touchstart",c,{passive:!0}),p(),document.querySelectorAll('[data-cocktail-pop-out="true"]').forEach(e=>{e.style.cursor="pointer"}),document.querySelectorAll('[data-cocktail-carousel="true"]').forEach(e=>{e.style.cursor="pointer"}),new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.length>0&&e.addedNodes.forEach(e=>{1===e.nodeType&&e.querySelector&&e.querySelectorAll("[data-wp-lightbox] img").forEach(e=>{const t=e.closest("[data-wp-lightbox]");t&&(t.style.cursor="pointer")})})})}).observe(document.body,{childList:!0,subtree:!0})}function l(e){const t=e.target.closest("[data-wp-lightbox]");if(!t)return;if(t.hasAttribute("data-cocktail-pop-out")||t.hasAttribute("data-cocktail-carousel"))return;e.preventDefault(),e.stopPropagation();const o=t.querySelector("img");o&&r(o,t)}function a(e){const t=e.target.closest('[data-cocktail-pop-out="true"]');if(!t)return;const o=t.querySelector("img");o&&(e.preventDefault(),e.stopPropagation(),d(o,t))}function s(t){e&&"Escape"===t.key&&u()}function c(t){e&&t.target===e&&u()}function r(o,n){if(t)return;const i=o.src,l=o.alt||"";let a="";const s=n.querySelector("figcaption");s&&(a=s.textContent);const c=function(e,t,o){const n=document.createElement("div");n.className="drinks-lightbox-overlay",n.innerHTML=`\n        <div class="drinks-lightbox-content">\n            <button class="drinks-lightbox-close" aria-label="Close lightbox">&times;</button>\n            <img class="drinks-lightbox-image" src="${e}" alt="${t}" />\n            ${o?`<div class="drinks-lightbox-caption">${o}</div>`:""}\n        </div>\n    `;return n.querySelector(".drinks-lightbox-close").addEventListener("click",u),n.addEventListener("click",e=>{e.target===n&&u()}),n}(i,l,a);document.body.appendChild(c),requestAnimationFrame(()=>{c.classList.add("active"),e=c,document.body.style.overflow="hidden"})}function d(e,t){let i=e.dataset.id||e.getAttribute("data-id")||"";if(!i){const t=e.className.match(/wp-image-(\d+)/);t&&(i=t[1])}e.src,e.alt;const l=function(){const e=document.createElement("div");e.className="drinks-lightbox-overlay drinks-popout-overlay",e.innerHTML='\n        <div class="drinks-lightbox-content drinks-popout-content">\n            <div class="drinks-lightbox-header drinks-popout-header">\n                <button type="button" class="drinks-lightbox-close" aria-label="Close pop-out">&times;</button>\n            </div>\n            <div class="drinks-lightbox-body drinks-popout-body">\n                <div class="drinks-content-popout" id="drinks-content-popout">\n                    <div class="drink-content-slide active" id="initial-drink-content">\n                        \x3c!-- Initial drink content will be loaded here --\x3e\n                        <div class="drink-content-loading">\n                            <div class="drink-content-loading-spinner"></div>\n                            Loading drink content...\n                        </div>\n                        \n                        \x3c!-- Navigation controls --\x3e\n                        <div class="drinks-content-navigation">\n                            <button class="drinks-content-prev" aria-label="Previous drink">&larr;</button>\n                            <button class="drinks-content-next" aria-label="Next drink">&rarr;</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    ';const t=e.querySelector(".drinks-lightbox-close");return t&&t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),g()}),e.addEventListener("click",t=>{t.target===e&&g()}),e}();document.body.appendChild(l),function(e,t,o){const n=e.querySelector("#drinks-content-popout");if(!n)return void console.error("Drinks Plugin: No drinks content container found");const i=n.querySelector(".drink-content-loading");i&&(i.innerHTML='<div class="drink-content-loading-spinner"></div>Loading drink content...');const l=new FormData;l.append("action","get_drink_content"),l.append("image_id",t);const a=window.drinksPluginAjax?window.drinksPluginAjax.ajaxurl:"/wp-admin/admin-ajax.php";fetch(a,{method:"POST",body:l}).then(e=>e.json()).then(t=>{const i=n.querySelector(".drink-content-loading");i&&i.remove(),t.success&&t.data?(n.innerHTML=t.data,w(o),function(e){const t=e.querySelector(".drinks-content-prev"),o=e.querySelector(".drinks-content-next");t&&t.addEventListener("click",()=>{}),o&&o.addEventListener("click",()=>{})}(e)):n.innerHTML='<div class="drink-content-error">No drink content available</div>'}).catch(e=>{console.error("Drinks Plugin: Error loading drinks content:",e);const t=n.querySelector(".drink-content-loading");t&&(t.innerHTML='<div class="drink-content-error">Error loading drink content</div>')})}(l,i,e),function(e,t,i){const l=e.querySelector(".drinks-lightbox-body");l&&(l.style.cursor="pointer",l.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),g(),setTimeout(()=>{window.drinksPluginJetpackCarousel&&window.drinksPluginJetpackCarousel.open?window.drinksPluginJetpackCarousel.open(t,i):function(e){o&&g();let t=e.dataset.id||e.getAttribute("data-id")||"";if(!t){const o=e.className.match(/wp-image-(\d+)/);o&&(t=o[1])}const i=function(e,t){const o=document.createElement("div");o.className="jetpack-carousel-lightbox-overlay",o.innerHTML=`\n        <div class="jetpack-carousel-lightbox-content">\n            <div class="jetpack-carousel-lightbox-header">\n                <button type="button" class="jetpack-carousel-lightbox-close" aria-label="Close carousel">&times;</button>\n            </div>\n            <div class="jetpack-carousel-lightbox-body">\n                <div class="wp-block-jetpack-slideshow aligncenter" data-autoplay="false" data-delay="3" data-effect="slide">\n                    <div class="wp-block-jetpack-slideshow_container swiper-container">\n                        <ul class="wp-block-jetpack-slideshow_swiper-wrapper swiper-wrapper" id="jetpack-carousel-slides">\n                            <li class="wp-block-jetpack-slideshow_slide swiper-slide">\n                                <figure>\n                                    <img src="${e}" alt="${t}" class="wp-block-jetpack-slideshow_image" />\n                                    <figcaption>${t}</figcaption>\n                                </figure>\n                            </li>\n                        </ul>\n                        \n                        \x3c!-- Slideshow controls --\x3e\n                        <a class="wp-block-jetpack-slideshow_button-prev swiper-button-prev swiper-button-white" role="button" tabindex="0" aria-label="Previous slide"></a>\n                        <a class="wp-block-jetpack-slideshow_button-next swiper-button-next swiper-button-white" role="button" tabindex="0" aria-label="Next slide"></a>\n                        <a aria-label="Pause Slideshow" class="wp-block-jetpack-slideshow_button-pause" role="button"></a>\n                        <div class="wp-block-jetpack-slideshow_pagination swiper-pagination swiper-pagination-white swiper-pagination-custom"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `;const n=o.querySelector(".jetpack-carousel-lightbox-close");return n&&n.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),k()}),o.addEventListener("click",e=>{e.target===o&&k()}),o}(e.src,e.alt||"Drink Image");document.body.appendChild(i),function(e,t,o){const n=e.querySelector("#jetpack-carousel-slides");if(!n)return void console.error("Drinks Plugin: No slides container found");n.innerHTML+='<li class="wp-block-jetpack-slideshow_slide swiper-slide"><div class="jetpack-carousel-loading"><div class="jetpack-carousel-loading-spinner"></div>Loading carousel images...</div></li>';const i=new FormData;i.append("action","drinks_filter_carousel"),i.append("search_term",""),i.append("figcaption_text",o.alt||""),i.append("show_content","1"),i.append("random","true");const l=window.drinksPluginAjax?window.drinksPluginAjax.ajaxurl:"/wp-admin/admin-ajax.php";fetch(l,{method:"POST",body:i}).then(e=>e.text()).then(t=>{const i=n.querySelector(".jetpack-carousel-loading");i&&i.remove();const l=document.createElement("div");l.innerHTML=t,l.querySelectorAll("li").forEach((e,t)=>{n.appendChild(e.cloneNode(!0))}),w(o),function(e){if(void 0!==window.jetpackSlideshowSettings){const t=e.querySelector(".wp-block-jetpack-slideshow");t&&window.jetpackSlideshowSettings&&window.jetpackSlideshowSettings.init&&window.jetpackSlideshowSettings.init(t)}}(e)}).catch(e=>{console.error("Drinks Plugin: Error loading carousel images:",e);const t=n.querySelector(".jetpack-carousel-loading");t&&(t.innerHTML='<div class="jetpack-carousel-loading">Error loading carousel images</div>')})}(i,0,e),requestAnimationFrame(()=>{i.classList.add("active"),n=i,document.body.style.overflow="hidden"})}(t)},100)}))}(l,e,t),requestAnimationFrame(()=>{l.classList.add("active"),o=l,document.body.style.overflow="hidden"})}function u(){e&&!t&&(t=!0,e.classList.remove("active"),document.body.style.overflow="",setTimeout(()=>{e&&e.parentNode&&e.parentNode.removeChild(e),e=null,t=!1},300))}function g(){o&&(o.classList.remove("active"),document.body.style.overflow="",setTimeout(()=>{o&&o.parentNode&&o.parentNode.removeChild(o),o=null},300))}function p(){document.querySelectorAll("[data-wp-lightbox] img").forEach(e=>{const t=e.closest("[data-wp-lightbox]");t&&(t.style.cursor="pointer")})}function y(){const e=document.querySelectorAll('[data-cocktail-pop-out="true"]');return e.length,{containers:e.length,lightbox:!!o,global:!!window.drinksPluginPopOut}}function k(){n&&(n.classList.remove("active"),document.body.style.overflow="",setTimeout(()=>{n&&n.parentNode&&n.parentNode.removeChild(n),n=null},300))}function h(e,t){t||(t=".entry-content");const o=document.querySelector(t);o&&o.querySelectorAll("img").forEach(t=>{const o=m(t);let n=e;o&&(n=v(o)),n.includes("springtime")&&(n="summertime");const i=`var(--${n}-border)`,l=`var(--${n}-font-color)`,a=`var(--${n}-shadow)`;t.style.border=i;const s=t.closest("figure");if(s){const e=s.querySelector("figcaption");e&&(e.style.color=l,e.style.textShadow=a)}})}function m(e){console.log("Drinks Plugin (extractCategoryFromImage): Analyzing image:",e),console.log("Drinks Plugin (extractCategoryFromImage): Image src:",e.src),console.log("Drinks Plugin (extractCategoryFromImage): Image title:",e.title),console.log("Drinks Plugin (extractCategoryFromImage): Image alt:",e.alt);const t=e.title||e.alt||"";console.log("Drinks Plugin (extractCategoryFromImage): Checking title/alt:",t);let o=t.match(/_([A-Z]{2})/);if(o)return console.log("Drinks Plugin (extractCategoryFromImage): Found category in title:",o[1]),o[1];const n=e.src||"";return console.log("Drinks Plugin (extractCategoryFromImage): Checking src:",n),o=n.match(/_([A-Z]{2})/),o?(console.log("Drinks Plugin (extractCategoryFromImage): Found category in src:",o[1]),o[1]):(console.log("Drinks Plugin (extractCategoryFromImage): No category found"),null)}function v(e){return{AU:"autumnal",RO:"romantic",EV:"everyday",SU:"summertime",SP:"summertime",FP:"fireplace",SO:"special-occasion",WI:"winter"}[e]||"std"}function w(e){if(console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Starting lightbox styling for image:",e.src),e.closest('[data-cocktail-pop-out="true"]'))console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Detected pop-out lightbox"),setTimeout(()=>{const t=document.querySelector(".drinks-content-popout img");if(t){console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Found image in pop-out:",t.src);const e=m(t);if(console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Extracted category code:",e),e){const t=v(e);console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Mapped to variable:",t),h(t,".drinks-content-popout");const o=document.querySelector(".drinks-content-popout");if(o){const e=o.querySelector("h1");e?(e.style.color=`var(--${t}-font-color)`,e.style.textShadow=`var(--${t}-shadow)`,console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Applied color and shadow to h1:",e.textContent)):console.log("Drinks Plugin (ucStyleLightBoxesByPageID): No h1 element found in pop-out");const n=o.querySelectorAll("li");console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Found",n.length,"list items to style"),n.forEach((e,o)=>{e.style.color=`var(--${t}-accent-color)`,e.style.textShadow=`var(--${t}-shadow)`,console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Applied accent color and shadow var(--"+t+"-accent-color) to li",o+1),e.querySelectorAll("em").forEach((e,t)=>{e.style.color="black",e.style.fontWeight="bold",e.style.fontStyle="normal",e.style.marginRight="0.25em",e.style.textShadow="none",console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Styled em element",t+1,"to black in li",o+1)})})}}}else{console.log("Drinks Plugin (ucStyleLightBoxesByPageID): No image found in pop-out, using clicked image");const t=m(e);if(console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Extracted category code from clicked image:",t),t){const e=v(t);console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Mapped to variable:",e),h(e,".drinks-content-popout");const o=document.querySelector(".drinks-content-popout");if(o){const t=o.querySelector("h1");t?(t.style.color=`var(--${e}-font-color)`,t.style.textShadow=`var(--${e}-shadow)`,console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Applied color and shadow to h1:",t.textContent)):console.log("Drinks Plugin (ucStyleLightBoxesByPageID): No h1 element found in pop-out");const n=o.querySelectorAll("li");console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Found",n.length,"list items to style"),n.forEach((t,o)=>{t.style.color=`var(--${e}-accent-color)`,t.style.textShadow=`var(--${e}-shadow)`,console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Applied accent color and shadow var(--"+e+"-accent-color) to li",o+1),t.querySelectorAll("em").forEach((e,t)=>{e.style.color="black",e.style.fontWeight="bold",e.style.fontStyle="normal",e.style.marginRight="0.25em",e.style.textShadow="none",console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Styled em element",t+1,"to black in li",o+1)})})}}}},100);else if(e.closest('[data-cocktail-carousel="true"]')){console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Detected carousel lightbox");const e=document.querySelectorAll(".wp-block-jetpack-slideshow_slide");console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Found",e.length,"carousel slides"),e.forEach((e,t)=>{const o=e.querySelector("img");if(o){console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Processing slide",t+1,":",o.src);const n=m(o);if(console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Extracted category code for slide",t+1,":",n),n){const o=v(n);console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Mapped to variable for slide",t+1,":",o),h(o,e)}}})}console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Lightbox styling complete")}function b(e){if(!e||"IMG"!==e.tagName)return void console.warn("⚠️ ucPortraitLandscape: Invalid image element:",e);const t=e.closest("figure")||e.closest(".wp-block-image")||e.parentElement;function o(){e.naturalWidth&&e.naturalHeight&&(t.classList.contains("portrait"),t.classList.contains("landscape"),t.classList.remove("portrait","landscape"),e.naturalHeight>e.naturalWidth?t.classList.add("portrait"):e.naturalHeight<e.naturalWidth&&t.classList.add("landscape"))}t?t.classList.contains("pop-off")||t.classList.contains("wp-block-gallery")||t.classList.contains("portrait")||t.classList.contains("landscape")||(e.complete&&e.naturalWidth&&e.naturalHeight?o():e.addEventListener("load",()=>{o()},{once:!0})):console.warn("⚠️ ucPortraitLandscape: No container found for image:",e.src)}function f(){document.querySelectorAll(".wp-block-image img, figure img").forEach((e,t)=>{b(e)});new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.length>0&&e.addedNodes.forEach(e=>{if(1===e.nodeType){"IMG"===e.tagName&&b(e);const t=e.querySelectorAll?e.querySelectorAll("img"):[];t.length>0&&t.forEach((e,t)=>{b(e)})}})})}).observe(document.body,{childList:!0,subtree:!0})}window.drinksPluginLightbox={init:i,open:r,close:u,setup:p},window.drinksPluginPopOut={init:i,open:d,close:g,test:y},window.testDrinksContent=y,window.drinksPluginStyling={styleImagesByPageID:h,extractCategoryFromImage:m,mapCategoryCodeToVariable:v,ucStyleLightBoxesByPageID:w},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",f):f(),window.addEventListener("load",()=>{document.querySelectorAll(".wp-block-image img, figure img").forEach((e,t)=>{b(e)})})})();