(()=>{let e=null,t=!1,o=null,n=null,r="";const i={clickedImage:(e,t="")=>({matchTerm:"",filterTerm:t,container:e,isOverlay:!0,closePopOut:!0,numSlides:null}),filteredCarousel:(e,t=null)=>({matchTerm:"",filterTerm:e,container:null,isOverlay:!0,closePopOut:!0,numSlides:t}),random:()=>({matchTerm:"",filterTerm:"",container:null,isOverlay:!0,closePopOut:!0,numSlides:null}),searchResults:(e,t)=>({matchTerm:"",filterTerm:e,container:null,isOverlay:!1,closePopOut:!1,moveToElement:t,numSlides:100})};function a(){document.addEventListener("click",e=>{const t=e.target.closest('[data-cocktail-carousel="true"], .cocktail-carousel, [data-carousel-enabled]');if(t&&"true"!==t.getAttribute("data-cocktail-pop-out")){e.preventDefault(),e.stopPropagation();const o=e.target.closest("#drinks-carousel-overlay"),n=t.querySelector("img"),r=n&&n.getAttribute("data-drink-category")||"";return o&&!r?void console.warn("Drinks Plugin: Clicked carousel slide missing data-drink-category attribute. Cannot open layer 2 carousel."):void l(i.clickedImage(t,r))}const o=e.target.closest("[data-filter]");if(o){const t=o.getAttribute("data-filter");if(t)return e.preventDefault(),e.stopPropagation(),void l(i.filteredCarousel(t))}const n=e.target.closest('[data-cocktail-pop-out="true"]');if(n){const t=n.querySelector("img");if(t)return e.preventDefault(),e.stopPropagation(),void u(t,n)}const r=e.target.closest("[data-wp-lightbox]");if(r&&!r.hasAttribute("data-cocktail-pop-out")&&!r.hasAttribute("data-cocktail-carousel")){const t=r.querySelector("img");if(t)return e.preventDefault(),e.stopPropagation(),void d(t,r)}}),document.addEventListener("keydown",s),document.addEventListener("touchstart",c,{passive:!0}),g(),document.querySelectorAll('[data-cocktail-pop-out="true"]').forEach(e=>{e.style.cursor="pointer"}),document.querySelectorAll('[data-cocktail-carousel="true"]').forEach(e=>{e.style.cursor="pointer"}),new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.length>0&&e.addedNodes.forEach(e=>{1===e.nodeType&&e.querySelector&&e.querySelectorAll("[data-wp-lightbox] img").forEach(e=>{const t=e.closest("[data-wp-lightbox]");t&&(t.style.cursor="pointer")})})})}).observe(document.body,{childList:!0,subtree:!0}),function(){const e=document.getElementById("drinks-carousel-overlay");if(!e)return void console.error("Drinks Plugin: Carousel overlay not found in DOM");const t=e.querySelector(".jetpack-carousel-lightbox-close");t&&t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),h()});const o=e.querySelector(".drinks-carousel-see-more");o&&o.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),function(){h();const e=(window.drinksPluginConfig?.homeUrl||"/")+"?s="+encodeURIComponent(r||"");console.log("Drinks Plugin: Redirecting to search page:",e),window.location.href=e}()}),e.addEventListener("click",t=>{t.target===e&&h()})}()}function l(e){console.log("Drinks Plugin: ucSummonCarousel called with context:",e),e.closePopOut&&o&&m();const t=document.getElementById("drinks-carousel-overlay");t?(e.moveToElement&&e.moveToElement.appendChild(t),f(t,e.matchTerm||"",e.filterTerm||"",e.container||null,e.numSlides||null),requestAnimationFrame(()=>{t.style.opacity="1",t.style.pointerEvents="auto",t.classList.add("active"),n=t,e.isOverlay&&(document.body.style.overflow="hidden")})):console.error("Drinks Plugin: Carousel overlay not found in DOM")}function s(t){e&&"Escape"===t.key&&p()}function c(t){e&&t.target===e&&p()}function d(o,n){if(t)return;const r=o.src,i=o.alt||"";let a="";const l=n.querySelector("figcaption");l&&(a=l.textContent);const s=function(e,t,o){const n=document.createElement("div");n.className="drinks-lightbox-overlay",n.innerHTML=`\n        <div class="drinks-lightbox-content">\n            <button class="drinks-lightbox-close" aria-label="Close lightbox">&times;</button>\n            <img class="drinks-lightbox-image" src="${e}" alt="${t}" />\n            ${o?`<div class="drinks-lightbox-caption">${o}</div>`:""}\n        </div>\n    `;return n.querySelector(".drinks-lightbox-close").addEventListener("click",p),n.addEventListener("click",e=>{e.target===n&&p()}),n}(r,i,a);document.body.appendChild(s),requestAnimationFrame(()=>{s.classList.add("active"),e=s,document.body.style.overflow="hidden"})}function u(e,t){let n=e.dataset.id||e.getAttribute("data-id")||"";if(!n){const t=e.className.match(/wp-image-(\d+)/);t&&(n=t[1])}e.src,e.alt;const r=function(){const e=document.createElement("div");e.className="drinks-lightbox-overlay drinks-popout-overlay",e.innerHTML='\n        <div class="drinks-lightbox-content drinks-popout-content">\n            <div class="drinks-lightbox-header drinks-popout-header">\n                <button type="button" class="drinks-lightbox-close" aria-label="Close pop-out">&times;</button>\n            </div>\n            <div class="drinks-lightbox-body drinks-popout-body">\n                <div class="drinks-content-popout" id="drinks-content-popout">\n                    <div class="drink-content-slide active" id="initial-drink-content">\n                        \x3c!-- Initial drink content will be loaded here --\x3e\n                        <div class="drink-content-loading">\n                            <div class="drink-content-loading-spinner"></div>\n                            Loading drink content...\n                        </div>\n                        \n                        \x3c!-- Navigation controls --\x3e\n                        <div class="drinks-content-navigation">\n                            <button class="drinks-content-prev" aria-label="Previous drink">&larr;</button>\n                            <button class="drinks-content-next" aria-label="Next drink">&rarr;</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    ';const t=e.querySelector(".drinks-lightbox-close");return t&&t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),m()}),e.addEventListener("click",t=>{t.target===e&&m()}),e}();document.body.appendChild(r),function(e,t,o,n){const r=e.querySelector("#drinks-content-popout");if(!r)return void console.error("Drinks Plugin: No drinks content container found");const a=r.querySelector(".drink-content-loading");a&&(a.innerHTML='<div class="drink-content-loading-spinner"></div>Loading drink content...');const s=new FormData;s.append("action","get_drink_content"),s.append("image_id",t);const c=window.drinksPluginAjax?window.drinksPluginAjax.ajaxurl:"/wp-admin/admin-ajax.php";fetch(c,{method:"POST",body:s}).then(e=>e.json()).then(t=>{const a=r.querySelector(".drink-content-loading");a&&a.remove(),t.success&&t.data?(r.innerHTML=t.data,w(o),function(e){const t=e.querySelector(".drinks-content-prev"),o=e.querySelector(".drinks-content-next");t&&t.addEventListener("click",()=>{}),o&&o.addEventListener("click",()=>{})}(e),function(e,t,o){const n=e.querySelector(".drinks-content-popout img"),r=e.querySelector(".drinks-content-popout h1");n&&(n.style.cursor="pointer",n.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const t=n.getAttribute("data-drink-category")||"";m(),setTimeout(()=>{l(i.clickedImage(o,t))},100)})),r&&(r.style.cursor="pointer",r.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const t=r.getAttribute("data-drink-category")||r.textContent.trim();m(),setTimeout(()=>{l(i.filteredCarousel(t))},100)}))}(e,0,n)):r.innerHTML='<div class="drink-content-error">No drink content available</div>'}).catch(e=>{console.error("Drinks Plugin: Error loading drinks content:",e);const t=r.querySelector(".drink-content-loading");t&&(t.innerHTML='<div class="drink-content-error">Error loading drink content</div>')})}(r,n,e,t),requestAnimationFrame(()=>{r.classList.add("active"),o=r,document.body.style.overflow="hidden"})}function p(){e&&!t&&(t=!0,e.classList.remove("active"),document.body.style.overflow="",setTimeout(()=>{e&&e.parentNode&&e.parentNode.removeChild(e),e=null,t=!1},300))}function m(){o&&(o.classList.remove("active"),document.body.style.overflow="",setTimeout(()=>{o&&o.parentNode&&o.parentNode.removeChild(o),o=null},300))}function g(){document.querySelectorAll("[data-wp-lightbox] img").forEach(e=>{const t=e.closest("[data-wp-lightbox]");t&&(t.style.cursor="pointer")})}function y(){const e=document.querySelectorAll('[data-cocktail-pop-out="true"]');return e.length,{containers:e.length,lightbox:!!o,global:!!window.drinksPluginPopOut}}function h(){let e=n;e||(e=document.querySelector(".jetpack-carousel-lightbox-overlay.active")),e&&(e.classList.remove("active"),document.body.style.overflow="",setTimeout(()=>{if(e){e.style.opacity="0",e.style.pointerEvents="none";const t=e.querySelector("#jetpack-carousel-slides");t&&(t.innerHTML="")}n=null},300))}function f(e,t="",o="",n=null,i=null){const a=e.querySelector("#jetpack-carousel-slides");if(!a)return void console.error("Drinks Plugin: No slides container found");r=o;const l=t||"empty",s=o||"empty";o?console.log(`Carousel MODE 1: Filter, Parameters: matchTerm="${l}", filterTerm="${s}"`):t?console.log(`Carousel MODE 2: Match, Parameters: matchTerm="${l}", filterTerm="${s}"`):console.log(`Carousel MODE 3: Random, Parameters: matchTerm="${l}", filterTerm="${s}"`),a.innerHTML='<li class="wp-block-jetpack-slideshow_slide swiper-slide"><div class="jetpack-carousel-loading"><div class="jetpack-carousel-loading-spinner"></div>Loading carousel images...</div></li>';const c=new FormData;c.append("action","drinks_filter_carousel"),c.append("search_term",o),c.append("figcaption_text",t),null!==i&&c.append("num_slides",i);const d=window.drinksPluginAjax?window.drinksPluginAjax.ajaxurl:"/wp-admin/admin-ajax.php";fetch(d,{method:"POST",body:c}).then(e=>e.text()).then(t=>{const r=document.createElement("div");r.innerHTML=t;const i=r.querySelector(".drinks-search-results-header");if(i){const t=e.querySelector(".jetpack-carousel-lightbox-header");if(t){const e=t.querySelector(".drinks-search-results-header");e&&e.remove(),t.insertBefore(i.cloneNode(!0),t.firstChild)}}const l=r.querySelectorAll("li");if(0===l.length){a.innerHTML=`\n                <li class="wp-block-jetpack-slideshow_slide swiper-slide drinks-404-slide">\n                    <div class="drinks-404-content">\n                        <h1 class="wp-block-heading has-text-align-center">404</h1>\n                        <p class="has-text-align-center">Content Missing</p>\n                        ${o?'<p class="has-text-align-center">No results found for: <strong>'+o+"</strong></p>":""}\n                    </div>\n                </li>\n            `;const t=e.querySelector(".jetpack-carousel-lightbox-header");if(t){const e=t.querySelector(".drinks-search-results-header");if(e)e.textContent="Search Results: 0";else{const e=document.createElement("h5");e.className="drinks-search-results-header",e.textContent="Search Results: 0",t.insertBefore(e,t.firstChild)}}return}const s=e.querySelector(".wp-block-jetpack-slideshow_container"),c=s?.swiper;a.innerHTML="",c&&c.removeAllSlides(),l.forEach((e,t)=>{a.appendChild(e.cloneNode(!0))}),w(n?.querySelector("img")||document.querySelector("img")),function(e){const t=e.querySelector(".wp-block-jetpack-slideshow_container");if(t&&t.swiper){const o=t.swiper;o.params.loop&&o.loopDestroy(),o.update();const n=o.slides.length;if(n<=3?(o.params.loop=!0,o.params.loopedSlides=n,o.params.loopAdditionalSlides=1,o.loopCreate(),o.update()):n<=8?(o.params.loop=!0,o.params.loopedSlides=Math.ceil(n/2),o.params.loopAdditionalSlides=Math.max(2,Math.floor(.3*n)),o.loopCreate(),o.update()):o.params.loop=!1,o.updateSize(),o.updateSlides(),o.updateProgress(),o.updateSlidesClasses(),o.params.pagination&&o.params.pagination.el){const t=()=>{const t=e.querySelector(".swiper-pagination-custom");if(!t)return;const n=Array.from(o.slides).filter(e=>!e.classList.contains("swiper-slide-duplicate")).length,r=o.realIndex%n+1;t.textContent=r+"/"+n};o.params.pagination.renderCustom=function(e,t,o){const n=Array.from(e.slides).filter(e=>!e.classList.contains("swiper-slide-duplicate")).length;return e.realIndex%n+1+"/"+n},o.params.pagination.type="custom",o.on("slideChange",t),o.pagination&&(o.pagination.render(),o.pagination.update())}const r=o.params.loop?1:0;o.slideTo(r,0),requestAnimationFrame(()=>{o.update(),o.pagination&&(o.pagination.render(),o.pagination.update())})}else{if(console.log("Drinks Plugin: Swiper not found, initializing manually"),!t)return void console.error("Drinks Plugin: Slideshow container not found");if("undefined"==typeof Swiper)return void console.error("Drinks Plugin: Swiper library not loaded");const e=t.querySelector(".swiper-wrapper"),o=e?e.children.length:0;let n;n=o<=3?{loop:!0,loopedSlides:o,loopAdditionalSlides:1}:o<=8?{loop:!0,loopedSlides:Math.ceil(o/2),loopAdditionalSlides:Math.max(2,Math.floor(.3*o))}:{loop:!1};const r=new Swiper(t,{effect:"slide",grabCursor:!0,...n,navigation:{nextEl:t.querySelector(".swiper-button-next"),prevEl:t.querySelector(".swiper-button-prev")},pagination:{el:t.querySelector(".swiper-pagination"),type:"custom",clickable:!0,renderCustom:function(e,t,o){const n=Array.from(e.slides).filter(e=>!e.classList.contains("swiper-slide-duplicate")).length;return e.realIndex%n+1+"/"+n}},keyboard:{enabled:!0},a11y:{enabled:!0}});r.on("slideChange",()=>{r.pagination&&(r.pagination.render(),r.pagination.update())}),console.log("Drinks Plugin: Swiper initialized with",o,"slides")}}(e)}).catch(e=>{if(console.error("Drinks Plugin: Error loading carousel images:",e),o){const e=a.querySelector(".jetpack-carousel-loading");e&&(e.innerHTML='<div class="jetpack-carousel-loading">Error loading drinks. Redirecting to search page...</div>'),setTimeout(()=>{h(),window.location.href="/?s="+encodeURIComponent(o)},1500)}else{const e=a.querySelector(".jetpack-carousel-loading");e&&(e.innerHTML='<div class="jetpack-carousel-loading">Error loading carousel images</div>')}})}function k(e,t){let o;if(t||(t=".entry-content"),"string"==typeof t)o=document.querySelector(t);else{if(!(t instanceof HTMLElement))return;o=t}o&&o.querySelectorAll("img").forEach(t=>{const o=v(t);let n=e;o&&(n=S(o)),n.includes("springtime")&&(n="summertime");const r=`var(--${n}-border)`,i=`var(--${n}-font-color)`,a=`var(--${n}-shadow)`;t.style.border=r;const l=t.closest("figure");if(l){const e=l.querySelector("figcaption");e&&(e.style.color=i,e.style.textShadow=a)}})}function v(e){let t=(e.title||e.alt||"").match(/_([A-Z]{2})/);return t?t[1]:(t=(e.src||"").match(/_([A-Z]{2})/),t?t[1]:null)}function S(e){return{AU:"autumnal",RO:"romantic",EV:"everyday",SU:"summertime",SP:"summertime",FP:"fireplace",SO:"special-occasion",WI:"winter"}[e]||"std"}function w(e){e.closest('[data-cocktail-pop-out="true"]')&&setTimeout(()=>{const t=document.querySelector(".drinks-content-popout img");if(t){const e=v(t);if(e){const t=S(e);k(t,".drinks-content-popout");const o=document.querySelector(".drinks-content-popout");if(o){const e=o.querySelector("h1");e&&(e.style.color="#241547",e.style.textShadow="none"),o.querySelectorAll("li").forEach((e,o)=>{e.style.color=`var(--${t}-accent-color)`,e.style.textShadow=`var(--${t}-shadow)`,e.querySelectorAll("em").forEach((e,t)=>{e.style.color="black",e.style.fontWeight="bold",e.style.fontStyle="normal",e.style.marginRight="0.25em",e.style.textShadow="none"})})}}}else{const t=v(e);if(t){const e=S(t);k(e,".drinks-content-popout");const o=document.querySelector(".drinks-content-popout");if(o){const t=o.querySelector("h1");t&&(t.style.color="#241547",t.style.textShadow="none"),o.querySelectorAll("li").forEach((t,o)=>{t.style.color=`var(--${e}-accent-color)`,t.style.textShadow=`var(--${e}-shadow)`,t.querySelectorAll("em").forEach((e,t)=>{e.style.color="black",e.style.fontWeight="bold",e.style.fontStyle="normal",e.style.marginRight="0.25em",e.style.textShadow="none"})})}}}},100);const t=document.querySelector(".jetpack-carousel-lightbox-overlay.active");t&&t.querySelectorAll(".wp-block-jetpack-slideshow_slide").forEach((e,t)=>{const o=e.querySelector("img");if(o){const n=v(o);if(n){const o=S(n);console.log("Drinks Plugin (ucStyleLightBoxesByPageID): Mapped to variable for slide",t+1,":",o),k(o,e)}}})}function b(e){if(!e||"IMG"!==e.tagName)return void console.warn("⚠️ ucPortraitLandscape: Invalid image element:",e);const t=e.closest("figure")||e.closest(".wp-block-image")||e.parentElement;function o(){e.naturalWidth&&e.naturalHeight&&(t.classList.contains("portrait"),t.classList.contains("landscape"),t.classList.remove("portrait","landscape"),e.naturalHeight>e.naturalWidth?t.classList.add("portrait"):e.naturalHeight<e.naturalWidth&&t.classList.add("landscape"))}t?t.classList.contains("pop-off")||t.classList.contains("wp-block-gallery")||t.classList.contains("portrait")||t.classList.contains("landscape")||(e.complete&&e.naturalWidth&&e.naturalHeight?o():e.addEventListener("load",()=>{o()},{once:!0})):console.warn("⚠️ ucPortraitLandscape: No container found for image:",e.src)}function x(){document.querySelectorAll(".wp-block-image img, figure img").forEach((e,t)=>{b(e)});new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.length>0&&e.addedNodes.forEach(e=>{if(1===e.nodeType){"IMG"===e.tagName&&b(e);const t=e.querySelectorAll?e.querySelectorAll("img"):[];t.length>0&&t.forEach((e,t)=>{b(e)})}})})}).observe(document.body,{childList:!0,subtree:!0})}function L(){if(!document.body.classList.contains("search")&&!document.body.classList.contains("search-results"))return;const e=new URLSearchParams(window.location.search).get("s");if(!e)return;const t=document.querySelector("body.search main");l(i.searchResults(e,t))}window.drinksPluginLightbox={init:a,open:d,close:p,setup:g},window.drinksPluginPopOut={init:a,open:u,close:m,test:y},window.drinksPluginCarousel={summon:l,contexts:i,loadImages:f,close:h},window.testDrinksContent=y,window.drinksPluginStyling={styleImagesByPageID:k,extractCategoryFromImage:v,mapCategoryCodeToVariable:S,ucStyleLightBoxesByPageID:w},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a(),document.addEventListener("keydown",e=>{"Escape"===e.key&&(p(),m(),h())}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",x):x(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",L):L(),window.addEventListener("load",()=>{document.querySelectorAll(".wp-block-image img, figure img").forEach((e,t)=>{b(e)})})})();